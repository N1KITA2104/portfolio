<div class="container mt-3 mb-3">
  <div class="glassmorphic-card card">
    <ng-container *ngIf="weather$ | async as weatherData; else loading">
      <div class="card-header p-3 text-white rounded-top">
        <h5 class="card-title mb-2">10-Day Weather Forecast</h5>
      </div>
      <div class="card-body text-white m-0 p-0">
        <div class="glassmorphic-card p-3 mb-3">
          <h5 class="card-title mb-2">
            {{ weatherData.location.name }}, {{ weatherData.location.region }}
          </h5>
          <p class="card-subtitle">{{ weatherData.location.country }}</p>
        </div>
        <ul class="list-unstyled m-0 pb-4">
          <li
            *ngFor="let day of weatherData.forecast.forecastday"
            class="d-flex flex-column flex-sm-row align-items-start justify-content-between border-bottom border-secondary pb-3 p-3"
          >
            <div class="d-flex align-items-center flex-grow-1 mb-2 mb-sm-0">
              <div class="me-3">
                <p class="m-0 fw-bold">{{ day.date | date : "EEE" }}</p>
                <p class="m-0">{{ day.date | date : "MM/dd" }}</p>
                <img
                  [src]="day.day.condition.icon"
                  height="64px"
                  width="64px"
                  alt="Weather icon"
                  class="img-fluid"
                />
              </div>
              <div>
                <p class="m-0 display-6 fw-bold">
                  <strong
                    >{{ day.day.maxtemp_c }}째C /
                    {{ day.day.mintemp_c }}째C</strong
                  >
                  <br />
                  <strong
                    >{{ day.day.maxtemp_f }}째F /
                    {{ day.day.mintemp_f }}째F</strong
                  >
                </p>
                <p class="m-0 fs-5">{{ day.day.condition.text }}</p>
                <p class="m-0">UV Index: {{ day.day.uv }}</p>
                <p class="m-0">
                  Precipitation: {{ day.day.totalprecip_mm }} mm /
                  {{ day.day.totalprecip_in }} in
                </p>
                <p class="m-0">
                  Visibility: {{ day.day.avgvis_km }} km /
                  {{ day.day.avgvis_miles }} miles
                </p>
              </div>
            </div>
            <div class="text-end ms-3 mt-2 mt-sm-0">
              <p class="m-0">
                <small class="d-flex align-items-center">
                  <img
                    src="/assets/weather-icons/rain.svg"
                    height="20px"
                    width="auto"
                    alt="Rain"
                  />
                  <strong class="ms-1"
                    >{{ day.day.daily_chance_of_rain }}%</strong
                  >
                </small>
              </p>
              <p class="m-0">
                <small class="d-flex align-items-center">
                  <img
                    src="/assets/weather-icons/wind.svg"
                    height="20px"
                    width="auto"
                    alt="Wind"
                  />
                  <strong class="ms-1"
                    >{{ day.day.maxwind_kph }} km/h /
                    {{ day.day.maxwind_mph }} mph</strong
                  >
                </small>
              </p>
              <p class="m-0">
                <small class="d-flex align-items-center">
                  <img
                    src="/assets/weather-icons/humidity.svg"
                    height="20px"
                    width="auto"
                    alt="Humidity"
                  />
                  <strong class="ms-1">{{ day.day.avghumidity }}%</strong>
                </small>
              </p>
              <p class="m-0">
                <small class="d-flex align-items-center">
                  <img
                    src="/assets/weather-icons/snow.svg"
                    height="20px"
                    width="auto"
                    alt="Snow"
                  />
                  <strong class="ms-1">{{ day.day.totalsnow_cm }} cm</strong>
                </small>
              </p>
              <p class="m-0">
                <small class="d-flex align-items-center">
                  <img
                    src="/assets/weather-icons/sunrise.svg"
                    height="20px"
                    width="auto"
                    alt="Sunrise"
                  />
                  <strong class="ms-1">{{ day.astro.sunrise }}</strong>
                </small>
              </p>
              <p class="m-0">
                <small class="d-flex align-items-center">
                  <img
                    src="/assets/weather-icons/moon.svg"
                    height="20px"
                    width="auto"
                    alt="Moonset"
                  />
                  <strong class="ms-1">{{ day.astro.moonset }}</strong>
                </small>
              </p>
            </div>
          </li>
        </ul>
      </div>
    </ng-container>

    <ng-template #loading>
      <app-loading />
    </ng-template>
  </div>
</div>
